<ion-header>
	<app-header [title]="pageTitle"></app-header>
</ion-header>

<ion-content>
	<!-- top bar content -->
	<div class="content-header">
		<div class="row justify-content-between ion-align-items-center">
			<div class="col-lg-auto">
				<div class="page-info">
					<h1 class="title">افزودن قرار داد جدید</h1>
					<p class="dsec">در این قسمت شما میتوانید یک قرار داد جدید اضاف کنید
					</p>
				</div>
			</div>
			<div class="col-lg-auto">
				<ion-button shape="round" color="medium" fill="outline">
					<ion-back-button defaultHref="employees" [text]=" 'بازگشت' " [icon]="'arrow-back-outline'"></ion-back-button>
					<!-- <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
					بازگشت -->
				</ion-button>
			</div>
		</div>
	</div>
	<main>
		<div class="container">
			<div class="stepper py-4">
				<div class="line"></div>
				<div class="item" [class.active]="step===1">
					<span class="no">1</span>
					<span class="title">اطلاعات اولیه</span>
				</div>
				<div class="item" [class.active]="step===2">
					<span class="no">2</span>
					<span class="title">آدرس</span>
				</div>
				<div class="item" [class.active]="step===3">
					<span class="no">3</span>
					<span class="title">سمت</span>
				</div>
				<div class="item" [class.active]="step===4">
					<span class="no">4</span>
					<span class="title">اطلاعات بانکی</span>
				</div>
				<div class="item" [class.active]="step===5">
					<span class="no">5</span>
					<span class="title">اطلاعات خانوادگی</span>
				</div>
				<div class="item" [class.active]="step===6">
					<span class="no">6</span>
					<span class="title">چند رسانه ایی</span>
				</div>
			</div>
		</div>

		<form class="d-block py-4" [formGroup]="employeeForm" enctype="multipart/form-data" (ngSubmit)="onSubmit()">
			<div class="container">
				<!-- step - 1 -->
				<div [class.show]="step === 1" class="form-item">
					<div class="row">
						<div class="col-12">
							<div class="my-4">
								<div class="title-1">
									<h2 class="title">اطلاعات عمومی</h2>
									<p class="dsec">
										در این بخش اطلاعات عمومی کارمند را وارد کنید
									</p>
								</div>
							</div>
						</div>
						<!-- نام -->
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>نام</label>
								<ion-input autocomplete="new-pass" formControlName="first_name"></ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint"></span>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>نام خانوادگی</label>
								<ion-input autocomplete="new-pass" formControlName="last_name"></ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint">مثلا : امین</span>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>شماره شناسنامه</label>
								<ion-input autocomplete="new-pass" formControlName="birth_certificate_number"></ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint">مثلا : دهقانی</span>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>کد ملی</label>
								<ion-input type="number" autocomplete="new-pass" formControlName="national_code"></ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint">کد ملی باید 10 رقمی باشد</span>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>موبایل</label>
								<ion-input  type="number"  autocomplete="new-pass" formControlName="mobile"></ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint">شماره همراه 11 رقمی است و با 0 شروع می شود</span>
							</div>
						</div>
						<div class="col-lg-6">
						<!-- formControlName="birth_date" -->
						<div class="form-input mb-3">
							<label>تاریخ تولد</label>
							<ng-persian-datepicker [timeMeridian]="true" [timeEnable]="false" [dateIsGregorian]="true" dateFormat="jYYYY/jMM/jDD">
								<input type="text" formControlName="birth_date" />
							 </ng-persian-datepicker>
							<span class="error">
								<app-validator [control]="employeeForm.controls['birth_date']" [controlName]="'تاریخ تولد'">
								</app-validator>
							</span>
							<span class="hint"></span>
						</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>محل تولد</label>
								<ion-input autocomplete="new-pass" formControlName="birth_place"></ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint">مثلا : شیراز</span>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>محل صدور شناسنامه</label>
								<ion-input autocomplete="new-pass" formControlName="birth_certificate_issuance_place">
								</ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint">مثلا : شیراز</span>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>جنسیت</label>
								<ion-input autocomplete="new-pass" formControlName="gender"></ion-input>
								<span class="error">
									<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
								</span>
								<span class="hint">مرد یا زن</span>
							</div>
						</div>
						<div class="col-lg-6 " *ngIf="StaticData">
							<div class="form-input mb-3">
								<label>وضعیت تاهل</label>
								<ng-select
										[items]="StaticData.maritalStatus"
										placeholder="انتخاب کنید"
										bindLabel="name"
										bindValue="value"
										formControlName="marital_status"
									>
									</ng-select>
								<span class="error">
									<app-validator [control]="employeeForm.controls['marital_status']" [controlName]="'وضعیعت تاهل'"></app-validator>
								</span>
								<span class="hint">مجرد یا متاهل</span>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="form-input mb-3">
								<label>نام پدر</label>
								<ion-input autocomplete="new-pass" formControlName="father_name"></ion-input>
								<span class="error">
									<app-validator [control]="employeeForm.controls['father_name']" controlName="'نام پدر'"></app-validator>
								</span>
								<span class="hint">مثلا : حبیب</span>
							</div>
						</div>
						<div class="col-lg-6 " *ngIf="StaticData">

							<div class="form-input mb-3">
								<label>آخرین مدرک تحصیلی</label>
								<ng-select
									[items]="StaticData.degree"
									placeholder="انتخاب کنید"
									bindLabel="name"
									bindValue="value"
									formControlName="degree_id"
								>
								</ng-select>
								<span class="error">
									<app-validator [control]="employeeForm.controls['degree_id']" controlName="آخرین مدرک تحصیلی"></app-validator>
								</span>
								<span class="hint">مثلا : 071*******</span>
							</div>
						</div>

					</div>
				</div>
				<!-- step - 2 -->
				<div [class.show]="step === 2" class="form-item" >

					<div formArrayName="addresses">
						<div *ngFor="let item of addressFormGroup.controls ; let i = index" class="row" [formGroupName]="i">
							<div class="col-12 my-4">
								<div class="title-1">
									<h2 class="title">آدرس</h2>
									<p class="dsec">
										در این بخش اطلاعات آدرس و محل زندگی کارمند را وارد کنید
									</p>
								</div>
							</div>
							<!-- آدرس منزل -->
							<div class="col-lg-12">
								<div class="form-input mb-3" *ngIf="province && province.length">
									<label>انتخاب شهر</label>
									<ng-select
										[items]="province"
										placeholder="یک شهر انتخاب کنید"
										bindLabel="name"
										bindValue="id"
										groupBy="province"
										formControlName="city_id"
									>
									</ng-select>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint"> مثلا شیراز </span>
								</div>
							</div>
							<!-- آدرس منزل -->
							<div class="col-lg-12">
								<div class="form-input mb-3">
									<label>آدرس منزل</label>
									<ion-textarea autocomplete="new-pass" formControlName="address"></ion-textarea>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا : شیراز خیابان زند خیابان رودکی </span>
								</div>
							</div>
							<!-- کد پستی منزل -->
							<div class="col-lg-6">
								<div class="form-input mb-3">
									<label>کد پستی منزل</label>
									<ion-input autocomplete="new-pass" formControlName="postal_code"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا : 71335984668</span>
								</div>
							</div>
							<!-- شماره تماس منزل -->
							<div class="col-lg-6">
								<div class="form-input mb-3">
									<label>شماره تماس منزل</label>
									<ion-input autocomplete="new-pass" formControlName="phone"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا : 071*******</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- step - 3 -->
				<div [class.show]="step=== 3 " class="form-item">
					<div formArrayName="military_information">
						<div class="row" *ngFor="let item of militaryInformationGroup.controls ; let i = index" [formGroupName]="i">
							<div class="col-12">
								<div class="my-4">
									<div class="title-1">
										<h2 class="title">وضعیت سربازی</h2>
										<p class="dsec">
											وضعیت نظام وضیفه خود را در این قسمت مشخص کنید .
										</p>
									</div>
								</div>
							</div>
							<div class="col-lg-12 " *ngIf="StaticData">
								<div class="form-input mb-3">
									<label>وضعیت نظام وظیفه </label>
									<ng-select
										[items]="StaticData.military_status"
										placeholder="انتخاب کنید"
										bindLabel="name"
										bindValue="value"
										formControlName="military_state"
									>
									</ng-select>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا : 071*******</span>
								</div>
							</div>
							<div class="col-lg-12">
								<div class="form-input mb-3">
									<label>علت معافی</label>
									<ion-input formControlName="military_exempt_reason"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا : 071*******</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- step - 4 -->
				<div [class.show]="step=== 4 " class="form-item">
					<div formArrayName="bank_information" >
						<div class="row" *ngFor="let item of bankInformationGroup.controls ; let i = index"   [formGroupName]="i">
							<div class="col-12">
								<div class="my-4">
									<div class="title-1">
										<h2 class="title">اطلاعات بانکی</h2>
										<p class="dsec">
											در این بخش اطلاعات بانکی و نحوه ی واریز حقوق برای کارمند را وارد کنید
										</p>
									</div>
								</div>
							</div>
							<div class="col-lg-6 ">
								<div class="form-input mb-3">
									<label>نام بانک</label>
									<ion-input autocomplete="new-pass" formControlName="name"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint"></span>
								</div>
							</div>
							<div class="col-lg-6 ">
								<div class="form-input mb-3">
									<label>نام شعبه</label>
									<ion-input autocomplete="new-pass" formControlName="branch_name"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint"></span>
								</div>
							</div>
							<div class="col-lg-6 ">
								<div class="form-input mb-3">
									<label>شماره حساب</label>
									<ion-input autocomplete="new-pass" formControlName="account_number"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint"></span>
								</div>
							</div>
							<div class="col-lg-6 ">
								<div class="form-input mb-3">
									<label>شماره کارت</label>
									<ion-input autocomplete="new-pass" formControlName="card_number"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint"></span>
								</div>
							</div>
							<div class="col-lg-12 ">
								<div class="form-input mb-3">
									<label>شماره شبا</label>
									<ion-input autocomplete="new-pass" formControlName="iban_number"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">شماره شبا بدون IR </span>
								</div>
							</div>
							<div class="col-lg-6 ">
								<ion-item lines="none">
									<ion-label> پرداخت با چک </ion-label>
									<ion-checkbox type="string" slot="start" formControlName="payment_with_check">
									</ion-checkbox>
								</ion-item>
							</div>
						</div>
					</div>
				</div>
				<!-- step - 5 -->
				<div [class.show]="step=== 5 " class="form-item">
					<div formArrayName="family_information">
						<div class="row" *ngFor="let item of familyInformationGroup.controls ; let i = index"  [formGroupName]="i">
							<div class="col-12">
								<div class="my-4">
									<div class="title-1">
										<h2 class="title">اطلاعات خانوادگی</h2>
										<p class="dsec">
											در این بخش اطلاعات خانوادگی و تعداد اولاد کارمند را وارد کنید
										</p>
									</div>
								</div>
							</div>

							<div class="col-lg-4 ">
								<div class="form-input mb-3">
									<label>تعداد کل فرزندان</label>
									<ion-input autocomplete="new-pass" formControlName="total_child"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا 2</span>
								</div>
							</div>
							<div class="col-lg-4 ">
								<div class="form-input mb-3">
									<label>تعداد فرزندان بالای 18 سال</label>
									<ion-input autocomplete="new-pass"
										formControlName="count_student_child_over_18_years_old"></ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا 2</span>
								</div>
							</div>
							<div class="col-lg-4 ">
								<div class="form-input mb-3">
									<label>تعداد فرزندان زیر 18 سال</label>
									<ion-input autocomplete="new-pass" formControlName="count_child_under_18_years">
									</ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا 2</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- step - 6 -->
				<div [class.show]="step=== 6 " class="form-item">
					<!-- step - 6 -->
					<div formArrayName="image">
						<div class="row" *ngFor="let item of imageGroup.controls ; let i = index"  [formGroupName]="i">
							<div class="col-12">
								<div class="my-4">
									<div class="title-1">
										<h2 class="title">چند رسانه ای</h2>
										<p class="dsec">
											در این بخش اطلاعات تصاویر پرسنلی و دیگر تصاویر کارمند را وارد کنید
										</p>
									</div>
								</div>
							</div>
							<div class="col-lg-4 ">
								<div class="form-input mb-3">
									<label>تصویر شناسنامه</label>
									<ion-input type="file" accept="image/*" autocomplete="new-pass" (change)="birth_certificate_image_uploadFile($event , i )" formControlName="birth_certificate_image">
									</ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا 2</span>
								</div>
							</div>
							<div class="col-lg-4 ">
								<div class="form-input mb-3">
									<label>تصویر کارت ملی</label>
									<ion-input type="file" accept="image/*" autocomplete="new-pass" (change)="national_card_image_uploadFile($event , i )" formControlName="national_card_image">
									</ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا 2</span>
								</div>
							</div>
							<div class="col-lg-4 ">
								<div class="form-input mb-3">
									<label>کارت سربازی / معافیت سربازی</label>
									<ion-input type="file" accept="image/*" autocomplete="new-pass" (change)="military_card_image_uploadFile($event , i )" formControlName="military_card_image">
									</ion-input>
									<span class="error">
										<!-- <app-validator [control]="businessForm.controls['name']" [controlName]="'نام شرکت'"></app-validator> -->
									</span>
									<span class="hint">مثلا 2</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="container">
				<div class="row">
					<div class="col-12"><hr></div>
					<div class="col-lg-5"></div>
					<div class="col-lg-3">
						<ion-button *ngIf="step === 1" type="button" expand="block" color="medium" fill="outline" shape="round">پاک کردن فرم</ion-button>
						<ion-button *ngIf="step !== 1" type="button" (click)="PrevStep()" expand="block" color="medium" fill="outline" shape="round">بازگشت به مرحله قبل</ion-button>
					</div>
					<div class="col-lg-4">
						<ion-button  *ngIf="step !== 6" type="button" (click)="NextStep()" expand="block" color="success" fill="solid" shape="round">ثبت و ادامه</ion-button>
						<ion-button  *ngIf="step === 6" type="submit" expand="block" color="success" fill="solid" shape="round">ثبت کارمند</ion-button>
					</div>
				</div>
			</div>
		</form>
	</main>
</ion-content>
